
# 3주차 로또 기능 구현 사항
## 1. 로또 구입 금액 안내 출력
- [x] "구입금액을 입력해 주세요." 메시지 출력

---
## 2. 로또 구입금액 입력
- [x] `Console`의 `readLine()`을 활용해 입력받는다.
- [x] 로또 금액의 제한
  - [x] 다만 1등 당첨 금액이 20억이므로 자료형을 고민해야 하며, 이에따른 개수 제한을 설정해야 한다.
  - [x] 편의상 금액의 제한을 Integer 범위의 근사값인 20억으로 걸어두고 자료형은 Long으로 한다.
  - [x] $20억 당첨금 * 로또 200만개 = 1천조$ -> 범위를 벗어나지 않는다.

---
## 3. 로또 구입 금액 검증
- [x] 로또 구입 금액은 1천원 단위로 나누어 떨어져야 한다.
- [x] 금액은 정수 표현으로 입력받는다.
- [x] 최소 금액은 1천원으로 한다.
- [x] 금액은 Integer 범위 내로 입력 받아야 당첨금이 Long 범위를 초과하지 않기 때문에 20억 제한으로 입력받는다.
- [x] 위 조건을 만족하지 못하는 경우 `IllegalArgumentException`예외를 발생시킨다.
    - [x] 에러메시지에 `"[ERROR]"`로 시작하는 접두사가 들어가야 한다. (Enum)
- [x] 예외를 발생시킨 뒤에 에러를 출력 후 그 부분부터 입력을 다시 받아야 한다.

---
## 4. 로또 발행
### 중복되지 않는 6개의 숫자를 자동추첨
- [x] 숫자의 범위는 1~45까지이다.
- [x] Integer로 입력받는다.
- [x] Randoms의 `pickUniqueNumbersInRange` 를 활용한다.
### Lotto 클래스를 활용해 구현
- [x] numbers의 접근 제어자인 private을 변경하지 않는다.
- [x] 인스턴스 변수를 추가하지 않는다 → 즉 일급 컬렉션으로 사용한다.
- [x] 패키지 변경은 가능하므로 domain/model로 이동한다.
- [x] 추가  기능은 추가할 수 있다.

---
## 5. 발행 로또 출력
- [x] 로또 구입 개수 안내 메시지 출력
    - [x] 출력 서식을 맞추어 출력한다.
- [x] 구입 로또의 번호를 출력
    - [x] 대괄호로 번호를 감싸야 하며, 쉼표 뒤에 공백이 존재한다.

---
## 6. 당첨번호 입력
### 당첨번호 입력 안내 출력
- [x] "당첨 번호를 입력해 주세요." 메시지 출력
### 당첨 번호 6개 입력
- [x] 중복되지 않는 6개의 숫자를 입력받는다.
    - [x] 숫자의 범위는 1~45까지이다.
    - [x] 숫자는 중복되어서는 안된다.
    - [x] 숫자는 쉼표를 기준으로 구분된다.
    - [x] `Console`의 `readLine()`을 활용해 입력받는다.
    - [x] 잘못된 값을 입력한 경우 `IllegalArgumentException`예외를 발생시킨다.
        - [x] 에러메시지에 `"[ERROR]"`로 시작하는 접두사가 들어가야 한다. (Enum)
- [x] Lotto 클래스를 활용해 구현한다.
    - [x] numbers의 접근 제어자인 private을 변경하지 않는다.
    - [x] 인스턴스 변수를 추가하지 않는다 → 즉 일급 컬렉션으로 사용한다.
    - [x] 패키지 변경은 가능하므로 domain/model로 이동한다.
    - [x] 추가 기능은 추가할 수 있다.

---
## 7. 보너스번호 입력
### 보너스 번호 입력 안내 출력
- [x] "보너스 번호를 입력해 주세요." 메시지 출력
### 보너스 번호 입력
- [x] 보너스 번호 1개를 입력받는다.
    - [x] 숫자의 범위는 1~45까지이다.
    - [x] 보너스 번호는 당첨번호와 중복되어서는 안된다.
    - [x] `Console`의 `readLine()`을 활용해 입력받는다.
    - [x] 잘못된 값을 입력한 경우 `IllegalArgumentException`예외를 발생시킨다.
        - [ ] 에러메시지에 `"[ERROR]"`로 시작하는 접두사가 들어가야 한다. (Enum)

---
## 8. 당첨번호와 로또를 비교
### 당첨 번호와 등수 목록 생성
- [x] 당첨번호를 비교해 로또의 당첨 개수와 등수 목록을 생성한다

---
## 9. 통계 결과 생성

### 수익률 계산
- [x] 총 당첨 금액에 따른 총 수익률을 계산한다.

### 등수별 당첨 개수 계산
- [x] 등수별 당첨 개수와 수익금에 대한 알림 문자열을 생성한다.
---
## 9. 결과 출력
- [x] 당첨 통계를 출력한다


---
# 리팩토링

## 리팩토링의 이유

- 도메인의 설계가 많이 부족했던 이유로, 불필요하게 도메인 객체를 많이 만들고 있었다고 판단했습니다.
- 또한 현재 프로젝트에서의 dto의 필요성에 대해 의문이 생겼습니다.
  - 복잡한 결과를 출력하지 않기 때문에 해당 프로젝트에서는 사용하지 않기로 결정했습니다.
    - 최대 1~2개의 인자를 받아 출력할 것으로 예상
- 특정 도메인의 네이밍이 문맥을 담고 있지 않다고 판단했습니다.
- 특정 도메인이 자신의 기능이 아닌 것을 책임지고 있다고 생각했습니다.

## 리팩토링에 따른 도메인 재설계

### 필요로 예상되는 도메인
- LottoPurchaseCost: 로또 구입 비용
  - View로 입력된 원시값을 Controller를 통해 받음
  - 금액의 검증
    - 1000원 단위인지
    - 음수인지, 1000원 미만인지
- 로또 구매는 어떻게 할 것인가? 컨트롤러에서 LottoPurchase로부터 값을 받아서 객체 생성
  - 이 때 RandomGenerator를 통해서 생성한다.
    - 이를 위해 LottoDispenser가 필요할 것 같기는 하다.
    - 또는 Generator를 controller가 가지고있는 방법이 있기는 하다.
    - 하지만 LottoNumberDispenser가 더 나아보인다.
      - 즉, LottoNumberDispenser가 원시값인 구매개수와 Generator를 받아 객체를 생성
      - 함수를 통해 numbers를 리턴한다.
  - 위 방법을 통해 컨트롤러에서 Lotto 객체를 생성한다.
- Lotto: 로또 번호
  - 로또 번호를 입력받아서 검증
- PurchasedLottos
  - 일급컬렉션으로 Lotto 객체를 가진다
  - 구매 로또 목록
- WinningLotto
  - Lotto와 BonusNumber를 인자로 가지고 있음
    - BonusNumber도 도메인에 포함해 검증 수행할 듯
- LottoGame
  - PurchasedLottos와 WinningLotto만 받음
    - 당첨에 대한 것만 알려주고, 결과의 통계는 여기서 만들지 않는다.
- LottoResults
  - Game이 리턴한 LottoResult enum 객체와 LottoPurchase를 인자로 받는다
  - 당첨 총액과 수익률을 구한다.
  - 로또 결과는 각 로또 당첨별 몇개 당첨인지와, 수익률을 알려준다.
  - 즉, Map과 수익률 값을 리턴해준다.
- 출력은 Map을 통해 Outputview에서 한다.
- 정렬된 Rank는 enum을 통한다.
  - 즉, 출력은 Map을 들고 있고, Enum으로부터 정렬된 값을 받는다.
  - 이를 반복을 돌리면서 Map의 값을 가져와서 출력한다.
- 기존에 있었던 LottoRankCount객체는 필요없다고 생각함. → Map에서 끝낸다.

## 필요로 예상되는 dto
- 없음
  - 로또 번호 출력 → List를 통함
  - 당첨 통계 출력 → Map을 통함
    - Map을 받아서 디테일 한 부분은 출력을 해야하는데, 무엇으로 할 것인가 → enum

## 기능 구현 사항에서의 변경사항
없음